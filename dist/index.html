<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FaithLinks Daily | Daily Lectio</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="images/favicon.ico" />
    <link rel="stylesheet" href="components/base/base.css" />
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: 'EB Garamond', serif;
        background: #fff;
        color: #222;
        margin: 0 auto;
        padding: 0;
      }
      .card img {
        max-width: 100%;
        height: auto;
        display: block;
      }
      .card-title {
        font-weight: 500;
        font-size: 1.25rem;
        color: #1a5da3;
      }
      .card {
        border: none;
        border-radius: 6px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        margin-bottom: 2rem;
      }
      .section-header, blockquote {
        font-family: 'EB Garamond', serif;
        font-weight: 500;
        font-style: italic;
        font-size: 1.75rem;
        text-align: center;
        margin: 2rem auto 1rem;
      }
      .nav-bar {
        text-align: center;
        padding: 1rem;
        background: #f9f9f9;
      }
      .nav-bar a {
        margin: 0 1rem;
        text-decoration: none;
        color: #1a5da3;
        font-weight: 500;
      }
      .footer {
        text-align: center;
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid #ccc;
        font-size: 0.95rem;
        color: #666;
      }
    </style>
    <script src="components/base/core.min.js"></script>
    <script src="components/base/script.js"></script>
  </head>
  <body>
    <div class="nav-bar">
      <a id="btn-daily-scripture" href="#" target="_blank">Daily Scripture</a>
      <a href="exegesis.html">Deep Dive</a>
      <a href="shop.html">Shop</a>
      <a href="donations.html">Donate</a>
    </div>

    <blockquote id="quote">Loading quote...</blockquote>
    <p class="section-header" id="summary">Loading summary...</p>

    <div class="container" style="max-width: 1080px; margin: auto;">
      <div class="card" id="theological_synthesis">
        <img src="images/image-27-368x228.jpg" alt="Theological Synthesis" />
        <div class="card-body">
          <h5 class="card-title">Theological Synthesis</h5>
          <div class="card-text"></div>
        </div>
      </div>

      <div class="card" id="psalm_summary">
        <img src="images/image-15-368x228.jpg" alt="Psalm Summary" />
        <div class="card-body">
          <h5 class="card-title">Psalm Summary</h5>
          <div class="card-text"></div>
        </div>
      </div>

      <div class="card" id="second_reading">
        <img src="images/image-20-370x257.jpg" alt="Second Reading" />
        <div class="card-body">
          <h5 class="card-title">Second Reading</h5>
          <div class="card-text"></div>
        </div>
      </div>

      <div class="card" id="gospel_summary">
        <img src="images/image-11-357x494.jpg" alt="Gospel Summary" />
        <div class="card-body">
          <h5 class="card-title">Gospel Summary</h5>
          <div class="card-text"></div>
        </div>
      </div>

      <div class="card" id="saint_reflection">
        <img src="images/image-1-349x358.jpg" alt="Saint Reflection" />
        <div class="card-body">
          <h5 class="card-title">Saint Reflection</h5>
          <div class="card-text"></div>
        </div>
      </div>

      <div class="card" id="daily_prayer">
        <img src="images/image-1-370x266.jpg" alt="Daily Prayer" />
        <div class="card-body">
          <h5 class="card-title">Daily Prayer</h5>
          <div class="card-text"></div>
        </div>
      </div>

      <div class="card" id="summary_card">
        <img src="images/image-28-368x228.jpg" alt="Daily Summary" />
        <div class="card-body">
          <h5 class="card-title">Scripture Summary</h5>
          <div class="card-text"></div>
        </div>
      </div>

      <!-- Exegesis Teaser -->
      <div class="card" id="exegesis">
        <img src="images/image-23-368x228.jpg" alt="Exegesis" />
        <div class="card-body">
          <h5 class="card-title">Exegesis</h5>
          <div class="card-text"></div>
          <a href="exegesis.html" class="btn btn-outline-primary mt-3">Deep Dive &rsaquo;</a>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>
        <a href="about-us.html">About</a> |
        <a href="past-reflections.html">Past Reflections</a>
      </p>
      <p>© 2025 Daily Lectio Media LLC | FaithLinks™ - Wear the Word. Grow in Grace.</p>
    </div>

    <script>
      (async () => {
        try {
          const res = await fetch('./devotions.json');
          const data = await res.json();
          const today = new Date().toISOString().split('T')[0];
          let entry = data[today] || (Array.isArray(data) ? data.find(d => d.date === today) : null);
          if (!entry) return;

          document.getElementById('btn-daily-scripture').href = entry.usccb_link || "#";
          document.getElementById('quote').textContent = entry.quote || '';
          document.getElementById('summary').textContent = entry.summary || '';

          function updateCard(id, value) {
            const card = document.getElementById(id);
            if (!card) return;
            const text = card.querySelector('.card-text');
            if (value) {
              text.innerHTML = value;
              card.classList.remove('d-none');
            } else {
              card.classList.add('d-none');
            }
          }

          updateCard('theological_synthesis', entry.theological_synthesis);
          updateCard('psalm_summary', entry.psalm_summary);
          updateCard('second_reading', entry.second_reading);
          updateCard('gospel_summary', entry.gospel_summary);
          updateCard('saint_reflection', entry.saint_reflection);
          updateCard('daily_prayer', entry.daily_prayer);
          updateCard('summary_card', entry.summary);
          updateCard('exegesis', entry.exegesis?.substring(0, 300) + '…');
        } catch (err) {
          console.error('Error loading devotions:', err);
        }
      })();
    </script>
  </body>
</html>